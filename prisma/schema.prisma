// prisma/schema.prisma
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = "postgresql://sinacofi:hola123@34.135.68.241:5432/rule"
}

model Schema {
    id          String      @id @default(uuid())
    messageCode String
    description String
    name        String
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @updatedAt
    Parameters  Parameter[]
}

model Parameter {
    id               String             @id @default(uuid())
    schemaId         String
    description      String
    row              Int?
    column           Int?
    defaultValue     String?
    validationRule   Json
    priority         Int
    schema           Schema             @relation(fields: [schemaId], references: [id])
    ParameterOption  ParameterOption[]
    MessageParameter MessageParameter[]
    Rules            Rules[]
}

model Field {
    id          String @id @default(uuid())
    label       String
    description String
    type        String
    placeholder String
}

model ParameterOption {
    id          String    @id @default(uuid())
    parameterId String
    description String
    value       String
    label       String
    parameter   Parameter @relation(fields: [parameterId], references: [id])
}

model MessageParameter {
    messageId   String
    parameter   Parameter @relation(fields: [parameterId], references: [id])
    parameterId String
    value       String

    @@id([messageId, parameterId])
}

model Status {
    id        String   @id @default(uuid())
    messageId String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    userId    String
    value     String
}

model Rules {
    id          String    @id @default(uuid())
    name        String
    description String
    fieldName   String
    condition   String
    value       String
    priority    Int
    parameterId String
    Parameter   Parameter @relation(fields: [parameterId], references: [id])
}
